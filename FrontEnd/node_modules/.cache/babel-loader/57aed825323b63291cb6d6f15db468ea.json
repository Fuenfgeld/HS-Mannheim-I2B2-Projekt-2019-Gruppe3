{"ast":null,"code":"import React from 'react';\nimport ReactFauxDOM from 'react-faux-dom';\nimport * as d3 from 'd3';\nconst url = \"http://localhost:5000/data\";\n\nclass SVGChart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      data: []\n    };\n  }\n\n  componentWillMount() {\n    fetch(url).then(res => {\n      return res.json();\n    }).then(new_data => this.setState({\n      data: new_data\n    })).catch(e => console.log(\"Fetching error\", e));\n    console.log(\"state\", this.state);\n  }\n\n  render() {\n    let data = this.props.data;\n    let margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    },\n        width = this.props.width - margin.left - margin.right,\n        height = this.props.height - margin.top - margin.bottom;\n    let x = d3.scaleBand().rangeRound([0, width]);\n    let y = d3.scaleLinear().range([height, 0]);\n    let xAxis = d3.axisBottom().scale(x);\n    let yAxis = d3.axisLeft().scale(y).ticks(10, \"%\"); //Create the element\n\n    const div = new ReactFauxDOM.Element('div'); //Pass it to d3.select and proceed as normal\n\n    let svg = d3.select(div).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n    x.domain(data.map(d => d.letter));\n    y.domain([0, d3.max(data, d => d.frequency)]);\n    svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\".concat(height, \")\")).call(xAxis);\n    svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 6).attr(\"dy\", \".71em\").style(\"text-anchor\", \"end\").text(\"Frequency\");\n    svg.selectAll(\".bar\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.letter)).attr(\"width\", 20).attr(\"y\", d => y(d.frequency)).attr(\"height\", d => {\n      return height - y(d.frequency);\n    }); //DOM manipulations done, convert to React\n\n    return div.toReact();\n  }\n\n}\n\nexport default SVGChart;","map":{"version":3,"sources":["C:\\Users\\lele\\VisualCodeWS\\front-alpha-v1.1\\src\\components\\SVGChart.js"],"names":["React","ReactFauxDOM","d3","url","SVGChart","Component","constructor","state","data","componentWillMount","fetch","then","res","json","new_data","setState","catch","e","console","log","render","props","margin","top","right","bottom","left","width","height","x","scaleBand","rangeRound","y","scaleLinear","range","xAxis","axisBottom","scale","yAxis","axisLeft","ticks","div","Element","svg","select","append","attr","domain","map","d","letter","max","frequency","call","style","text","selectAll","enter","toReact"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport ReactFauxDOM from 'react-faux-dom'\r\nimport * as d3 from 'd3'\r\n \r\nconst url =\"http://localhost:5000/data\";\r\n\r\nclass SVGChart extends React.Component {\r\n\r\nconstructor(){\r\n  super();\r\n  this.state = {\r\n    data : [] \r\n  };\r\n\r\n}\r\n\r\ncomponentWillMount(){\r\n  fetch(url).then(res => {\r\n    return res.json();\r\n  })\r\n  .then(new_data => this.setState({data : new_data}))\r\n  .catch(e => console.log(\"Fetching error\", e)) \r\n  console.log(\"state\", this.state);\r\n}\r\n \r\n  render() {\r\n    let data = this.props.data\r\n \r\n    let margin = {top: 20, right: 20, bottom: 30, left: 40},\r\n      width = this.props.width - margin.left - margin.right,\r\n      height = this.props.height - margin.top - margin.bottom;\r\n \r\n    let x = d3.scaleBand()\r\n      .rangeRound([0, width])\r\n \r\n    let y = d3.scaleLinear()\r\n      .range([height, 0])\r\n \r\n    let xAxis = d3.axisBottom()\r\n      .scale(x)\r\n \r\n    let yAxis = d3.axisLeft()\r\n      .scale(y)\r\n      .ticks(10, \"%\");\r\n \r\n    //Create the element\r\n    const div = new ReactFauxDOM.Element('div')\r\n     \r\n    //Pass it to d3.select and proceed as normal\r\n    let svg = d3.select(div).append(\"svg\")\r\n      .attr(\"width\", width + margin.left + margin.right)\r\n      .attr(\"height\", height + margin.top + margin.bottom)\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n \r\n      x.domain(data.map((d) => d.letter));\r\n      y.domain([0, d3.max(data, (d) => d.frequency)]);\r\n \r\n    svg.append(\"g\")\r\n      .attr(\"class\", \"x axis\")\r\n      .attr(\"transform\", `translate(0,${height})`)\r\n      .call(xAxis);\r\n \r\n    svg.append(\"g\")\r\n      .attr(\"class\", \"y axis\")\r\n      .call(yAxis)\r\n      .append(\"text\")\r\n      .attr(\"transform\", \"rotate(-90)\")\r\n      .attr(\"y\", 6)\r\n      .attr(\"dy\", \".71em\")\r\n      .style(\"text-anchor\", \"end\")\r\n      .text(\"Frequency\");\r\n \r\n    svg.selectAll(\".bar\")\r\n      .data(data)\r\n      .enter().append(\"rect\")\r\n      .attr(\"class\", \"bar\")\r\n      .attr(\"x\", (d) => x(d.letter))\r\n      .attr(\"width\", 20)\r\n      .attr(\"y\", (d) => y(d.frequency))\r\n      .attr(\"height\", (d) => {return height - y(d.frequency)});\r\n \r\n    //DOM manipulations done, convert to React\r\n    return div.toReact()\r\n  }\r\n \r\n}\r\nexport default SVGChart;"]},"metadata":{},"sourceType":"module"}